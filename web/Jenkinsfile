pipeline {
		agent any
		
		stages{
				stage('Checkout Code'){
					steps{
							checkout scm
					}
				}
				stage('Build'){
					steps{
							bat "cd web && mvn clean install -Dmaven.test.skip=true"
					}
				}
				stage('Archive Artifact'){
					steps{
							archiveArtifacts artifacts:'web/target/*.war'
					}
				}
				stage('deployment'){
					steps{
						sshagent(['deploy_user']) {
							sh "scp -o StrictHostKeyChecking=no web/target/web.war ubuntu@13.38.8.24:/var/lib/tomcat9"
						}
					}
				}
		}
}
		